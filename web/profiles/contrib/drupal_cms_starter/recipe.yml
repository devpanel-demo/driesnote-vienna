name: Starter
type: Site
description: A simple template with the just basics. Bring your own design, and build what you need.
recipes:
  - core/recipes/administrator_role
  - core/recipes/core_recommended_maintenance
  - core/recipes/core_recommended_performance
  - core/recipes/document_media_type
  - drupal_cms_admin_ui
  - drupal_cms_anti_spam
  - drupal_cms_authentication
  - drupal_cms_privacy_basic
  - drupal_cms_remote_video
  - drupal_cms_seo_basic
  - easy_email_express
install:
  - automated_cron
  - automatic_updates
  - automatic_updates_extensions
  - canvas
  - dashboard
  - drupal_cms_helper
  - eca_base
  - eca_config
  - eca_content
  - eca_misc
  - eca_render
  - eca_ui
  - eca_user
  - editor
  - filter
  - gin_login
  - menu_link_content
  - mercury
  - menu_link_content
  - modeler_api
  - navigation
  - package_manager
  - project_browser
  - update
  # The rest of these are in Standard.
  - inline_form_errors
  - config
  - token
  - views_ui
  # This theme MUST be installed or Canvas breaks in strange ways.
  - canvas_stark
config:
  # If the config we're importing already exists, we don't really care
  # what it looks like.
  strict: false
  import:
    canvas: '*'
    image:
      - image.style.large
      - image.style.thumbnail
    user:
      - views.view.user_admin_people
  actions:
    dashboard.dashboard.welcome:
      addComponentsToLayout:
        # The list of Canvas pages.
        - section: 0
          position: 0
          component:
            region:
              layout_twocol_section: first
            default_region: content
            configuration:
              id: 'views_block:recent_pages-block_recent_pages'
              label: ''
              label_display: visible
              provider: views
              context_mapping: { }
              views_label: ''
              items_per_page: null
        # The "recent content" block.
        - section: 0
          position: 1
          component:
            region:
              layout_twocol_section: first
            default_region: content
            configuration:
              id: 'views_block:recent_content-block_recent_content'
              label: ''
              label_display: visible
              provider: views
              context_mapping: { }
              views_label: ''
              items_per_page: null
    navigation.block_layout:
      # To prevent duplicated items if this recipe is applied more than once,
      # this needs to be changed as simple config. That's okay, though, because
      # even though Navigation treats this as a layout section, it's still just
      # a simple config object at heart.
      simpleConfigUpdate:
        # Add a link to the Drupal CMS user guide.
        sections.0.components.52e884dd-0301-4265-b2b3-9cea53a403f3:
          uuid: 52e884dd-0301-4265-b2b3-9cea53a403f3
          region: footer
          configuration:
            id: navigation_link
            label: Help
            label_display: '0'
            provider: navigation
            title: Help
            uri: 'https://new.drupal.org/docs/drupal-cms'
            icon_class: help
          weight: -2
          additional: []
    package_manager.settings:
      simpleConfigUpdate:
        additional_trusted_composer_plugins:
          # This is indirectly added by `drupal/core-dev`.
          - tbachert/spi
    system.site:
      simpleConfigUpdate:
        page.404: '/404'
    system.theme:
      simpleConfigUpdate:
        default: mercury
    user.role.content_editor:
      grantPermissionsForEachMediaType:
        - 'create %bundle media'
        - 'delete any %bundle media'
        - 'edit any %bundle media'
      grantPermissions:
        - 'access administration pages'
        - 'access contextual links'
        - 'access media overview'
        - 'access navigation'
        - 'administer url aliases'
        - 'create url aliases'
        - 'create canvas_page'
        - 'delete own files'
        - 'delete canvas_page'
        - 'edit canvas_page'
        - 'revert all revisions'
        - 'view all revisions'
        - 'view own unpublished media'
        - 'view the administration theme'
    node.settings:
      simpleConfigUpdate:
        use_admin_theme: true
    user.role.authenticated:
      grantPermissions:
        - 'delete own files'
        - 'view own unpublished content'
        - 'view welcome dashboard'
    user.settings:
      simpleConfigUpdate:
        verify_mail: true
        register: admin_only
        cancel_method: user_cancel_block
    core.menu.static_menu_link_overrides:
      simpleConfigUpdate:
        definitions.announcements_feed__announcement:
          menu_name: admin
          parent: system.admin
          weight: 0
          expanded: false
          enabled: false
    project_browser.admin_settings:
      simpleConfigUpdate:
        enabled_sources:
          recommended:
            # @see recommended.yml
            uri: 'https://git.drupalcode.org/api/v4/projects/167158/repository/files/recommended.yml/raw?ref=HEAD'
            ttl: 1
          drupalorg_jsonapi: []
        default_source: recommended
        allow_ui_install: true
        max_selections: 1
    automatic_updates.settings:
      simpleConfigUpdate:
        allow_core_minor_updates: true
    # Enable the name field in the entity form so it can be modified.
    core.entity_form_display.media.document.*:
      setComponent:
        name: name
        options:
          type: string_textfield
          weight: -1
          region: content
    update.settings:
      simpleConfigUpdate:
        check.disabled_extensions: true
    # Enable LinkIt and alignment for Canvas's included filter formats and
    # editors. This needs to be done after the theme has been set so that the
    # CKEditor 5 module can properly resolve library and plugin definitions.
    editor.editor.canvas_html_block:
      addItemToToolbar:
        item_name: alignment
        position: 3
      setProperties:
        settings.plugins.linkit_extension:
          linkit_enabled: true
          linkit_profile: default
        settings.plugins.ckeditor5_alignment:
          enabled_alignments:
            - center
            - justify
            - left
            - right
    editor.editor.canvas_html_inline:
      setProperties:
        settings.plugins.linkit_extension:
          linkit_enabled: true
          linkit_profile: default
    filter.format.canvas_html_block:
      setFilterConfigs:
        - instance_id: filter_html
          configuration:
            id: filter_html
            provider: filter
            status: true
            weight: 0
            settings:
              allowed_html: '<strong> <em> <u> <a href data-entity-type data-entity-uuid data-entity-substitution> <p class="text-align-left text-align-center text-align-right text-align-justify"> <br> <ul> <ol> <li>'
              filter_html_help: false
              filter_html_nofollow: false
        - instance_id: linkit
          configuration:
            id: linkit
            provider: linkit
            status: true
            weight: 0
            settings:
              title: false
    filter.format.canvas_html_inline:
      setFilterConfigs:
        - instance_id: filter_html
          configuration:
            id: filter_html
            provider: filter
            status: true
            weight: 0
            settings:
              allowed_html: '<strong> <em> <u> <a href data-entity-type data-entity-uuid data-entity-substitution> <p> <br> <ul> <ol> <li>'
              filter_html_help: false
              filter_html_nofollow: false
        - instance_id: linkit
          configuration:
            id: linkit
            provider: linkit
            status: true
            weight: 0
            settings:
              title: false
    # Add a Linkit matcher for Canvas pages.
    linkit.linkit_profile.default:
      addMatcher:
        id: 'entity:canvas_page'
        settings:
          metadata: '[canvas_page:title]'
          bundles: null
          group_by_bundle: null
          substitution_type: canonical
          limit: 100
        weight: -10
    # Disable authenticated and administrator-facing menu blocks in Canvas.
    canvas.component.block.system_menu_block.admin:
      disable: []
    canvas.component.block.system_menu_block.navigation-user-links:
      disable: []
    canvas.component.block.system_menu_block.tools:
      disable: []
    canvas.component.block.system_menu_block.top-tasks:
      disable: []
    # Don't expose any Navigation blocks to Canvas.
    canvas.component.block.navigation_dashboard:
      disable: []
    canvas.component.block.navigation_link:
      disable: []
    canvas.component.block.navigation_shortcuts:
      disable: []
    canvas.component.block.navigation_user:
      disable: []
    # The announcements feed and dashboard site status blocks are fundamentally
    # administrative, so hide them in Canvas.
    canvas.component.block.announce_block:
      disable: []
    canvas.component.block.dashboard_site_status:
      disable: []
    # Local tasks and local actions are not needed in Canvas, because we are
    # using Navigation and its top bar for that.
    canvas.component.block.local_actions_block:
      disable: []
    canvas.component.block.local_tasks_block:
      disable: []
    # Disable administrative content views in Canvas.
    canvas.component.block.views_block.publishing_content-block_drafts:
      disable: []
    canvas.component.block.views_block.publishing_content-block_scheduled:
      disable: []
    # Project Browser blocks should not be available in Canvas.
    canvas.component.block.project_browser_block.recommended:
      disable: []
    canvas.component.block.project_browser_block.drupalorg_jsonapi:
      disable: []
extra:
  recipe_installer_kit:
    finish_url: '/admin/dashboard/welcome'
