langcode: en
status: true
dependencies:
  enforced:
    module:
      - canvas
name: canvas_parametrized_width
label: 'Drupal Canvas parametrized width'
effects:
  # ⚠️ The `image_scale` effect is applied dynamically.
  # @see \Drupal\canvas\TypedData\ImageDerivativeWithParametrizedWidth
  249b8926-f421-4d60-8453-fb5d9265c731:
    uuid: 249b8926-f421-4d60-8453-fb5d9265c731
    id: image_convert
    weight: 1000
    data:
      # @todo Update to `avif` with `webp` fallback per @catch at
      #   https://www.drupal.org/project/canvas/issues/3515646#comment-16157223, once Canvas requires
      #   Drupal >=11.2.
      #   Fix in https://www.drupal.org/project/canvas/issues/3533562
      # @see https://www.drupal.org/project/drupal/issues/3510582
      extension: webp
# @see \Drupal\canvas\Routing\ParametrizedImageStyleConverter::convert()
# @todo Add third-party settings here for the parametrization, something like:
#third_party_settings:
#  parametrized_image_style:
#    width:
#      # Allowed values.
#      allowed:
#        - 640
#        - 750
#        - 828
#        - 1080
#        - 1200
#        - 1920
#        - 2048
#        - 3840
#      # Where in the effect to insert it.
#      insert_at: 'data.width'
#      # The image effect plugin that must be added for this parameter.
#      # The parameter will be replaced and the result will be passed into `addImageEffect()`.
#      effect:
#        id: image_scale
#        weight: 0
#        data: {}
#   Fix in https://www.drupal.org/project/canvas/issues/3533563
