langcode: en
status: true
dependencies:
  module:
    - eca_base
    - eca_form
    - eca_user
    - modeler_api
third_party_settings:
  modeler_api:
    modeler_id: bpmn_io
    label: 'User registration'
id: user_register
weight: 0
events:
  form__form_build_1_1:
    plugin: 'form:form_build'
    label: 'Build user register form'
    configuration:
      form_ids: user-register-form
      entity_type_id: ''
      bundle: ''
      operation: ''
    successors:
      -
        id: eca_form_field_set_weight_mail
        condition: eca_current_user_id_1o2afkb
  form__form_validate_form_1:
    plugin: 'form:form_validate'
    label: 'Validate user register form'
    configuration:
      form_ids: user-register-form
      entity_type_id: ''
      bundle: ''
      operation: ''
    successors:
      -
        id: Gateway_and_1
        condition: eca_form_field_value_on
conditions:
  eca_current_user_id_1o2afkb:
    plugin: eca_current_user_id
    label: 'authenticated?'
    configuration:
      negate: true
      user_id: '0'
  eca_form_field_value_on:
    plugin: eca_form_field_value
    label: 'notify?'
    configuration:
      negate: false
      field_value: '1'
      field_name: notify
      strip_tags: false
      trim: false
      xss_filter: false
      operator: equal
      type: numeric
      case: false
  eca_current_user_id_0eeg9de:
    plugin: eca_current_user_id
    label: 'authenticated?'
    configuration:
      negate: true
      user_id: '0'
gateways:
  Gateway_and_1:
    type: 0
    successors:
      -
        id: eca_token_set_random_value_string
        condition: eca_current_user_id_0eeg9de
actions:
  eca_form_field_require_required:
    label: 'Set password as not required'
    plugin: eca_form_field_require
    configuration:
      flag: false
      field_name: pass
    successors:
      -
        id: eca_form_field_add_state_password
        condition: ''
  eca_token_set_random_value_string:
    label: 'Get random string'
    plugin: eca_token_set_random_value
    configuration:
      token_name: password
      mode: password
      length: '15'
    successors:
      -
        id: eca_form_field_set_value_password
        condition: ''
  eca_form_field_set_value_password:
    label: 'Set password'
    plugin: eca_form_field_set_value
    configuration:
      field_value: '[password]'
      use_yaml: false
      validate_yaml: false
      field_name: pass
      strip_tags: false
      trim: false
      xss_filter: false
    successors:
      -
        id: eca_form_field_set_value_status
        condition: ''
  eca_form_field_set_weight_mail:
    label: 'Set weight for mail'
    plugin: eca_form_field_set_weight
    configuration:
      weight: '-10'
      field_name: mail
    successors:
      -
        id: eca_form_field_set_weight_name
        condition: ''
  eca_form_field_set_weight_name:
    label: 'Set weight for name'
    plugin: eca_form_field_set_weight
    configuration:
      weight: '-9'
      field_name: name
    successors:
      -
        id: eca_form_field_set_weight_notify
        condition: ''
  eca_form_field_set_weight_notify:
    label: 'Set weight for notify'
    plugin: eca_form_field_set_weight
    configuration:
      weight: '-8'
      field_name: notify
    successors:
      -
        id: eca_form_field_set_weight_password
        condition: ''
      -
        id: eca_form_field_default_value_notify
        condition: ''
  eca_form_field_set_weight_password:
    label: 'Set weight for password'
    plugin: eca_form_field_set_weight
    configuration:
      weight: '-7'
      field_name: pass
    successors:
      -
        id: eca_form_field_require_required
        condition: ''
      -
        id: eca_form_field_add_state_status
        condition: ''
  eca_form_field_default_value_notify:
    label: 'Enable notify by default'
    plugin: eca_form_field_default_value
    configuration:
      value: '1'
      field_name: notify
      strip_tags: false
      trim: false
      xss_filter: false
    successors: {  }
  eca_form_field_add_state_status:
    label: 'Add invisible state for status'
    plugin: eca_form_field_add_state
    configuration:
      selector: ':input[name="notify"]'
      state: invisible
      condition: checked
      value: ''
      field_name: status
    successors: {  }
  eca_form_field_add_state_password:
    label: 'Add invisible state for password'
    plugin: eca_form_field_add_state
    configuration:
      selector: ':input[name="notify"]'
      state: invisible
      condition: checked
      value: ''
      field_name: pass
    successors: {  }
  eca_form_field_set_value_status:
    label: 'Set status'
    plugin: eca_form_field_set_value
    configuration:
      field_value: '1'
      use_yaml: false
      validate_yaml: false
      field_name: status
      strip_tags: false
      trim: false
      xss_filter: false
    successors: {  }
